#!/usr/bin/env python3.6
import requests
import pathlib
import typing

CARDS_PATH = "./cards"

def main():
    download_images(card_ids())

def card_ids():
    # from https://www.drumondpark.com/articulatecards/load.js
    return [13905149,26337833,60488922,101106792,132143787,145608321,148826897,178874448,194755042,216952698,228357461,251464695,314029006,338792291,347874899,349741774,350470119,359785326,396873467,404078073,423793603,510176167,524180547,530916725,578084508,652932763,658727243,661053954,669999550,693717084,698911270,704567574,710599211,729838087,733592028,739052479,750092568,779903087,813842770,877001708,903213046,907265461,907599036,936863042,937154891,949599764,950386099,965461477,965702994,980542605,1004498099,1006018650,1011801669,1019631630,1024784108,1026634525,1030044458,1056009233,1077548014,1091191410,1097721846,1138503403,1147990447,1156353466,1156897912,1157492386,1179706496,1253690116,1295352980,1307520222,1322897040,1350912232,1364314922,1390289345,1438834241,1443817549,1471326625,1473839989,1515266922,1559064433,1561413964,1609908239,1628465579,1660550676,1672804855,1731811200,1739111751,1745044724,1745257853,1773221597,1807440193,1809874256,1837879835,1863215325,1877789944,1885746726,1912882996,1931846569,2007480934,2011938895]

def card_url(id_: int) -> str:
    return f"https://www.drumondpark.com/articulatecards/card{id_}.png"

def back_card_url():
    return "https://www.drumondpark.com/articulatecards/back.jpg"

def download_image(url: str, location: str) -> str:
    r = requests.get(url)
    filename = r.url.split("/")[-1]
    pathlib.Path(location).mkdir(exist_ok=True)
    file_location = f"{location}/{filename}"
    with open(file_location, "wb") as fo:
        fo.write(r.content)
    return file_location

def download_images(ids: typing.List[int]) -> None:
    for i, id_ in enumerate(ids, start=1):
        url = card_url(id_)
        location = download_image(url, CARDS_PATH)
        print(f"downloaded ({i}/{len(ids)}: {url} to {location}")

if __name__ == "__main__":
    main()

